import { Meta, Source } from '@storybook/addon-docs/blocks';

import * as Stories from './Textarea.stories';

import { DesignTokensList, LiveDemo } from '../../../blocks';
import { getCmpTokensJson } from '../../../tokens';

<Meta title="Components/Textarea" />

# Textarea

(PENDING)

## Overview

(PENDING) Variants, sizes, alignment, location... etc.

## Live demo

<LiveDemo
  story={Stories.Example}
  urlHtml="https://devoinc.github.io/genesys-styles/?path=/docs/components-textarea--docs"
  urlReact="https://devoinc.github.io/genesys-ui/?path=/docs/components-form-textarea--docs"
/>

## Anatomy

(PENDING)

## Accessibility

### Label

We recommend use the html tag `label` with the `for` attribute to connect it with the input control.

<Source
  code={`
  <div class="form__field">
    <label for="textarea-id-acc-1" class="label">
      Textarea label
    </label>
    <textarea
      id="textarea-id-acc-1"
      class="textarea"
      type="text"
      placeholder="Textarea placeholder..."
    />
  </div>
  `}
/>

#### Wrapping with label

Other accessible alternative (but not recommended) is wrapping the field with a `label` and replace that with an `span`.
It's an option when it's not possible to assign an `id` to the input to use in the attribute `for` of the `label`.

<Source
  code={`
  <label class="form__field">
    <span class="label">Textarea label</span>
    <textarea class="textarea" placeholder="Textarea placeholder..." />
  </label>
  `}
/>

#### Hiding label

We always recommend use a visible label connected with the input control, but sometimes we need to hide it because
of space or design reasons. In these cases we maintain the label text, but hiding it by styles, remaining accessible
for assistive technologies.

<Source
  code={`
  <div class="form__field">
    <label for="textarea-id-acc-2" class="label label--hide">
      Textarea label
    </label>
    <textarea
      id="textarea-id-acc-2"
      class="textarea"
      placeholder="Textarea placeholder..."
    />
  </div>
  `}
/>

#### aria-label or aria-labelledby

If it's not possible to add a label text we can use the attributes `aria-label`, `aria-labelledby` or `title`
in the input control, but it's not 100% supported by all the assistive technologies.

<Source
  code={`
  <div class="form__field">
    <textarea
      id="textarea-id-acc-2"
      class="textarea"
      aria-label="Textarea label"
      placeholder="Textarea placeholder..."
    />
  </div>
  `}
/>

Finally, do not use placeholders as a replacement for a label. There are various accessibility issues with this approach.

### Required

We recommend inform about which are the required fields in a form with a visual or textual mark.
Moreover, you must add the attribute `required` to the input control. You can add
`aria-required=true` too, but in many cases, the assistive technology information will be redundant.

<Source
  code={`
  <div class="form__field form__field--required">
    <label for="textarea-id-required" class="label">
      Required field
    </label>
    <textarea
      class="textarea"
      id="textarea-id-required"
      placeholder="Textarea placeholder..."
      required
    />
  </div>
  `}
/>

### Connecting help and validation messages

To connect our inputs with the helper and validation messages we recommend use the `aria-describedby` attribute.

<Source
  code={`
  <div class="form">
    <div class="form__field">
      <label for="textarea-id-helper" class="label">
        Textarea label
      </label>
      <textarea
        aria-describedby="textarea-id-helper-message"
        id="textarea-id-helper"
        class="textarea"
        placeholder="Textarea placeholder..."
      />
      <div class="form__helper" id="textarea-id-helper-message">
        Bits of moving fluff Drake Equation descended from astronomers cosmic
        fugue Vangelis
      </div>
    </div>
    <div class="form__field form__field--error">
      <label for="textarea-id-error" class="label">
        Description
      </label>
      <textarea
        aria-describedby="textarea-id-error-message"
        aria-invalid="true"
        id="textarea-id-error"
        class="textarea"
        placeholder="Enter the description..."
      >
        12345678
      </textarea>
      <div class="form__validation" id="textarea-id-error-message">
        The description must contain at least 140 characters.
      </div>
    </div>
  </div>
  `}
/>

### Validation

We recommend add the `aria-invalid` attribute to the input controls which don't match with the desire pattern
or they are required, but not filled.

Moreover, we should add the role `alert` to the validation message, which identifies the element as
the container where alert content will be added or updated. You don't need to add `aria-live=assertive` and
`aria-atomic=true` because they are implicit in the role.

`aria-live=assertive` tells assistive technologies to interrupt other processes to provide users with
immediate notification of relevant alert container changes.

`aria-atomic=true` tells assistive technologies to use the entire content of the alert element as the alert messag
even if only a portion of it has changed.

<Source
  code={`
  <div class="form__field form__field--error">
    <label for="textarea-id-error" class="label">
      Description
    </label>
    <textarea
      aria-describedby="textarea-id-error-message"
      aria-invalid="true"
      id="textarea-id-error"
      class="textarea"
      placeholder="Enter the description..."
    >
      12345678
    </textarea>
    <div role="alert" class="form__validation" id="textarea-id-error-message">
      The description must contain at least 140 characters.
    </div>
  </div>
  `}
/>

## Design tokens

(PENDING)

### Complete list

<DesignTokensList
  tokens={[
    ...getCmpTokensJson('textareaControl'),
    ...getCmpTokensJson('label'),
  ]}
/>
